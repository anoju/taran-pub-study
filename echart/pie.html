<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>echart pie</title>
    <link rel="stylesheet" href="../_js_static/css/front.min.css" />
    <link rel="stylesheet" href="lib/chart.css" />
    <link rel="stylesheet" href="css/stylesheet.css" />
    <script src="lib/echarts.min.js"></script>
  </head>
  <body>
    <!-- 이엑스 빌더에 적용할때 font-family는 'KBText' 에서 'KB금융 본문체' 바꿔서 적용예정 -->
    <div class="page">
      <div class="page-body">
        <div class="section">
          <h1 class="gd__h1">pie</h1>
          <h2 class="gd__h2">type1 (완료)</h2>

          <div id="pie1" style="height: 600px"></div>

          <hr class="hr-line mg-50y" />
          <h2 class="gd__h2">type2 (진행중)</h2>

          <div id="pie2" style="height: 600px"></div>
        </div>
      </div>
    </div>
    <script>
      pieChart1();
      pieChart2();

      function pieChart1() {
        var shlContent = document.getElementById('pie1');
        /* echartsInstance 생성 */
        var shlDonutECharts = echarts.init(shlContent);

        /* 차트를 구성할 컬러 */
        var chartName = '2023.01.01 ~ 01.21';
        var chartColor = ['#BC6EFF', '#826AF9', '#2D99FF', '#5066F7', '#2CD9C5', '#30BC86', '#FFC400', '#FE943A', '#F46271'];
        var chartData = [
          { name: '범례1', value: 150 },
          { name: '범례2', value: 180 },
          { name: '범례3', value: 120 },
          { name: '범례4', value: 80 },
          { name: '범례5', value: 70 },
          { name: '범례6', value: 50 },
          { name: '범례7', value: 40 },
          { name: '범례8', value: 20 },
          { name: '범례9', value: 10 }
        ];

        /* 차트를 구성할 옵션 */
        var chartOption = {
          /* 툴팁 */
          tooltip: {
            trigger: 'item',
            className: 'echart-tooltip2',
            formatter: function (params) {
              var addCommaValue = params.data.value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
              return `<div class='tooltip-title'>${params.seriesName}</div><div class='tooltip-remark' style='--color:${params.color}'>${params.name} <span class="values">${addCommaValue}명(${params.percent}%)</span></div>`;
            },
            extraCssText: "font-size: 11px;font-family:'KBText', sans-serif;line-height: 23px;padding: 15px;border-color: #EFEFEF;box-shadow: 0px 5px 12px rgba(51,51,51,0.15);"
          },
          /* 차트 범례 */
          legend: {
            bottom: 0,
            itemGap: 15,
            itemWidth: 14,
            icon: 'circle',
            textStyle: {
              color: '#555',
              fontSize: 13,
              fontFamily: 'KBText'
            }
          },
          /* 차트 데이터 */
          series: [
            {
              name: chartName,
              type: 'pie',
              radius: ['55%', '70%'],
              clockwise: false,
              label: {
                show: false
              },
              color: chartColor,
              data: chartData
            }
          ]
        };

        /* echartsInstance에 작성한 데이터로 차트 구성 */
        shlDonutECharts.setOption(chartOption);
      }

      function pieChart2() {
        var shlContent = document.getElementById('pie2');

        /* echartsInstance 생성 */
        var shlDonutECharts = echarts.init(shlContent);

        var chartName = '2023년 01월 01일 ~ 01월 21일';
        var chartColor = ['#BC6EFF', '#826AF9', '#2D99FF', '#5066F7', '#2CD9C5', '#30BC86', '#FFC400', '#FE943A', '#F46271'];
        var chartData = [
          { name: '범례1', value: 150 },
          { name: '범례2', value: 180 },
          { name: '범례3', value: 120 },
          { name: '범례4', value: 80 },
          { name: '범례5', value: 70 },
          { name: '범례6', value: 50 },
          { name: '범례7', value: 40 },
          { name: '범례8', value: 20 },
          { name: '범례9', value: 10 }
        ];

        /* 차트를 구성할 옵션 */
        var chartOption = {
          /* 차트 범례 */
          legend: {
            bottom: 0,
            itemGap: 15,
            itemWidth: 14,
            icon: 'circle',
            textStyle: {
              color: '#555',
              fontSize: 13,
              fontFamily: 'KBText'
            }
          },
          /* 툴팁 */
          tooltip: {
            show: false
          },
          label: {
            show: true,
            position: 'outside',
            // formatter: '{b}: {c}명 ({d}%)',
            //			formatter: function(params) {
            //				var addCommaValue = params.data.value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',')
            //				return `${params.name} ${addCommaValue}명(${params.percent}%)`;
            //			},
            formatter: function (params) {
              var addCommaValue = params.data.value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
              return `<div class='tooltip-title'>${params.seriesName}</div><div class='tooltip-remark' style='--color:${params.color}'>${params.name} <span class="values">${addCommaValue}명(${params.percent}%)</span></div>`;
            },
            fontSize: 11,
            fontFamily: 'KBText'
          },
          labelLine: {
            show: true // label 이 밖에 있을 경우 label 까지 이어진 선
          },
          emphasis: {
            // 가운데 타이틀
            label: {
              show: true,
              fontWeight: 'bold'
            }
          },
          /* 차트 데이터 */
          series: [
            {
              name: chartName,
              type: 'pie',
              radius: ['55%', '70%'],
              clockwise: false,
              color: chartColor,
              data: chartData
            }
          ]
        };

        /* echartsInstance에 작성한 데이터로 차트 구성 */
        shlDonutECharts.setOption(chartOption);
      }
    </script>
  </body>
</html>
