<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover" />
    <title>테스트</title>
    <link href="../../js_static/css/front.min.css" rel="stylesheet" />
    <style>
      .box {
        height: 100vh;
      }
      .box:nth-child(1) {
        background: red;
      }
      .box:nth-child(2) {
        background: orange;
      }
      .box:nth-child(3) {
        background: yellow;
      }
      .box:nth-child(4) {
        background: green;
      }
      .box:nth-child(5) {
        background: blue;
      }
      .box:nth-child(6) {
        background: darkblue;
      }
      .box:nth-child(7) {
        background: purple;
      }
      .tab-line {
        transition: 0.3s;
      }
    </style>
  </head>
  <body>
    <div class="page">
      <div class="page-head">
        <div>
          <h1>scroll animate</h1>
        </div>
      </div>
      <div class="page-body">
        <div class="tab-line-menu tab-fixed">
          <div class="tab-inner">
            <i class="tab-line" aria-hidden="true"></i>
            <ul class="tab-list">
              <li class="tab"><a href="#page-1">red</a></li>
              <li class="tab"><a href="#page-2">orange</a></li>
              <li class="tab"><a href="#page-3">yellow</a></li>
              <li class="tab"><a href="#page-4">green</a></li>
              <li class="tab"><a href="#page-5">blue</a></li>
              <li class="tab"><a href="#page-6">darkblue</a></li>
              <li class="tab"><a href="#page-7">purple</a></li>
            </ul>
          </div>
        </div>
        <div class="section">
          <ul class="txt-list">
            <li class="dot">탭을 클릭하면 해당하는 box까지 스크롤</li>
            <li class="dot">단, header나 tab에 box의상단이 가려지면 안됨</li>
            <li class="dot">해당 박스에 이동하면 탭도 활성화표시</li>
            <li class="dot">꼭 1개는 탭이 활성화되야하며, 1개만 활성화되야함(2개이상 안됨)</li>
            <li class="dot">힌트. 클릭 이벤트로 활성화해서는 안된다</li>
          </ul>
          <br />
          <div>
            <div class="box box-1" id="page-1"></div>
            <div class="box box-2" id="page-2"></div>
            <div class="box box-3" id="page-3"></div>
            <div class="box box-4" id="page-4"></div>
            <div class="box box-5" id="page-5"></div>
            <div class="box box-6" id="page-6"></div>
            <div class="box box-7" id="page-7"></div>
          </div>
          <br />
          <br />
          <br />
          <br />
          <br />
          <br />
          <br />
          <br />
        </div>
      </div>
    </div>

    <script type="text/javascript" src="../../js_static/js/jquery-3.6.0.min.js"></script>
    <script>
      function jqAcrdn() {
        const $menu = $('.tab-list .tab');

        $menu.click(function (e) {
          e.preventDefault();

          const $duration = 400;
          const $activeClass = 'on';
          const $this = $(this);
          const $panel = $($this.find('a').attr('href'));
          const $ul = $this.closest('.ui-folding');
          const $li = $this.closest('li');
          const $headHght = $('.page-head').outerHeight(); //헤더 높이값
          const $menuHght = $('.tab-line-menu').outerHeight(); //탭 메뉴 높이값
          const $excluded = $headHght + $menuHght;

          if ($this.hasClass($activeClass)) {
            return; // 이미 활성화되어 있는 경우 아무것도 하지 않음
          }

          $menu.removeClass($activeClass);
          $this.addClass($activeClass);

          $('body, html')
            .stop()
            .animate(
              {
                scrollTop: $panel.offset().top - $excluded // 메뉴가 가려지지 않도록 높이값 조정
              },
              $duration
            );

          // 메뉴가 화면 중앙으로 이동
          const $menuWidth = $menu.width();
          const $windowWidth = $(window).width();
          const $menuLeft = $this.position().left;
          const $menuCenter = $menuLeft + $menuWidth / 2;
          const $scrollLeft = $menuCenter - $windowWidth / 2;
          $('.tab-list').stop().animate(
            {
              scrollLeft: $scrollLeft
            },
            $duration
          );
        });
      }

      jqAcrdn();
    </script>
  </body>
</html>
